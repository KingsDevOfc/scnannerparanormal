<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Olho de Deus - Terror Hardcore</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Creepster&display=swap');

  html, body {
    margin: 0; padding: 0; overflow: hidden;
    background: black;
    color: #f00;
    font-family: 'Creepster', cursive, monospace;
    user-select: none;
  }

  #container {
    position: relative;
    width: 100vw; height: 100vh;
    overflow: hidden;
  }

  canvas, video {
    position: absolute;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    object-fit: cover;
    filter: grayscale(1) contrast(2) brightness(0.5);
    z-index: 1;
  }

  #overlay {
    position: absolute;
    width: 100vw; height: 100vh;
    pointer-events: none;
    mix-blend-mode: difference;
    background:
      repeating-linear-gradient(
        0deg,
        rgba(255,0,0,0.05) 0px,
        rgba(255,0,0,0.1) 2px,
        rgba(0,0,0,0) 4px
      );
    animation: glitchLines 0.3s infinite linear;
    z-index: 2;
  }

  @keyframes glitchLines {
    0% { background-position: 0 0; }
    100% { background-position: 0 20px; }
  }

  #message {
    position: absolute;
    top: 20px; width: 100%;
    text-align: center;
    font-size: 2.5em;
    color: #f00;
    text-shadow:
      0 0 5px #f00,
      0 0 10px #f00,
      0 0 20px #f00;
    z-index: 3;
    animation: flicker 1.5s infinite;
  }

  @keyframes flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  #susto-final {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: black;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }

  #susto-final img {
    max-width: 100vw;
    max-height: 100vh;
    animation: pulse 0.8s infinite alternate;
    filter: drop-shadow(0 0 15px red);
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    100% { transform: scale(1.05); }
  }

  /* Cursor assustador */
  body, button {
    cursor: url('https://i.imgur.com/O3zLRxN.png'), auto;
  }

  /* Mensagens macabras que piscam */
  .msg-piscante {
    position: absolute;
    color: #900;
    font-weight: bold;
    font-size: 4em;
    text-shadow:
      0 0 10px #f00,
      0 0 20px #f00,
      0 0 30px #600;
    animation: flicker 1s infinite alternate;
  }
</style>
</head>
<body>
  <div id="container">
    <video id="webcam" autoplay muted playsinline></video>
    <canvas id="glitchCanvas"></canvas>
    <div id="overlay"></div>
    <div id="message">Detectando energia paranormal...</div>
  </div>

  <div id="susto-final">
    <img src="https://i.imgur.com/QkrmnLh.jpeg" alt="Jeff The Killer" />
  </div>

<script>
(async () => {
  // Setup webcam video feed
  const video = document.getElementById('webcam');
  const canvas = document.getElementById('glitchCanvas');
  const ctx = canvas.getContext('2d');
  const overlay = document.getElementById('overlay');
  const message = document.getElementById('message');
  const sustoFinal = document.getElementById('susto-final');

  // Resize canvas
  function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  // Get webcam feed
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
    video.srcObject = stream;
  } catch(e) {
    alert('Erro ao acessar webcam: ' + e.message);
    return;
  }

  // Variables for glitch effect
  let frameCount = 0;
  function glitchEffect() {
    if (video.readyState >= 2) {
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

      // Glitch slices
      for(let i = 0; i < 10; i++) {
        const y = Math.random() * canvas.height;
        const height = 5 + Math.random() * 10;
        const x = (Math.random() - 0.5) * 20;
        ctx.drawImage(canvas, 0, y, canvas.width, height, x, y, canvas.width, height);
      }

      // Color shift effect
      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;
      for(let i = 0; i < data.length; i += 4) {
        data[i] = data[i] + 30;     // Red
        data[i + 1] = data[i + 1] - 10; // Green
        data[i + 2] = data[i + 2] - 10; // Blue
      }
      ctx.putImageData(imageData, 0, 0);
    }
    frameCount++;
  }

  // Flicker message animation
  function flickerMsg() {
    message.style.opacity = Math.abs(Math.sin(frameCount * 0.1));
  }

  // Play scary sounds with 3D spatial effect
  const AudioContext = window.AudioContext || window.webkitAudioContext;
  const audioCtx = new AudioContext();

  // Load audio buffers
  async function loadSound(url) {
    const response = await fetch(url);
    const arrayBuffer = await response.arrayBuffer();
    return audioCtx.decodeAudioData(arrayBuffer);
  }

  const sussurroBuffer = await loadSound('https://www.myinstants.com/media/sounds/creepy-whispers.mp3');
  const gritoBuffer = await loadSound('https://www.myinstants.com/media/sounds/scream.mp3');

  // Play sound function with panning
  function playSound(buffer, pan = 0) {
    const source = audioCtx.createBufferSource();
    source.buffer = buffer;
    const panner = audioCtx.createStereoPanner();
    panner.pan.value = pan;
    source.connect(panner).connect(audioCtx.destination);
    source.start();
  }

  // Spawn multiple whispers at random positions
  function spawnWhispers() {
    const pans = [-1, -0.5, 0, 0.5, 1];
    pans.forEach(pan => {
      setTimeout(() => {
        playSound(sussurroBuffer, pan);
      }, Math.random() * 2000);
    });
  }

  // Cursor shake effect
  function shakeCursor() {
    document.body.style.cursor = 'none';
    const cursor = document.createElement('div');
    cursor.style.position = 'fixed';
    cursor.style.width = '20px';
    cursor.style.height = '20px';
    cursor.style.background = 'red';
    cursor.style.borderRadius = '50%';
    cursor.style.pointerEvents = 'none';
    cursor.style.zIndex = '10000';
    document.body.appendChild(cursor);

    window.addEventListener('mousemove', e => {
      const x = e.clientX + (Math.random() - 0.5) * 20;
      const y = e.clientY + (Math.random() - 0.5) * 20;
      cursor.style.transform = `translate(${x}px, ${y}px)`;
    });
  }

  // Popups
  function spawnPopups(count) {
    for(let i = 0; i < count; i++) {
      setTimeout(() => {
        const popup = window.open('', '', 'width=300,height=150,top=100,left=100');
        if(!popup) return;
        popup.document.write('<body style="background:black;color:red;font-family:monospace;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;"><h1>VOCÊ ESTÁ SENDO OBSERVADO</h1></body>');
        setTimeout(() => popup.close(), 3000 + Math.random()*2000);
      }, i * 1000);
    }
  }

  // Main loop
  function mainLoop() {
    glitchEffect();
    flickerMsg();
    requestAnimationFrame(mainLoop);
  }

  // Start main loop
  mainLoop();

  // Start hardcore effects after delay
  setTimeout(() => {
    shakeCursor();
    spawnWhispers();
    spawnPopups(5);

    // Show final scary image and scream after 10s
    setTimeout(() => {
      sustoFinal.style.display = 'flex';
      const scream = audioCtx.createBufferSource();
      scream.buffer = gritoBuffer;
      scream.connect(audioCtx.destination);
      scream.start();
    }, 10000);
  }, 5000);

})();
</script>
</body>
</html>
